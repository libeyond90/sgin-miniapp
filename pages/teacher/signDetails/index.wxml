<!--pages/teacher/signDetails/index.wxml-->
<navbar title="ä»»åŠ¡è¯¦æƒ…" navType="back" />


<view class="page">
  <wxs src="../../../utils/util.wxs" module="dateFormatter"></wxs>
  <image class="bg-image" src="../../../image/bg.jpg" mode="aspectFill"></image>
  
  <!-- ä»»åŠ¡è¯¦æƒ…å¡ç‰‡ -->
  <view class="detail-card">
    <view class="card-header">
      <text class="task-title">{{taskDetail.title}}</text>
      <view class="action-btns">
        <view class="action-btn edit" bindtap="onEditTask">
          <text class="btn-icon">âœï¸</text>
          <text>ç¼–è¾‘</text>
        </view>
        <view class="action-btn delete" bindtap="onDelete">
          <text class="btn-icon">ğŸ—‘ï¸</text>
          <text>åˆ é™¤</text>
        </view>
      </view>
    </view>

    <view class="info-section">
      <view class="info-row">
        <text class="info-label">æ‰“å¡åœ°ç‚¹</text>
        <text class="info-value">{{taskDetail.address}}</text>
      </view>
      <view class="info-row">
        <text class="info-label">å‘å¸ƒè€…</text>
        <text class="info-value">{{taskDetail.createName}} {{taskDetail.createPosition}}</text>
      </view>
      <view class="info-row">
        <text class="info-label">åˆ›å»ºæ—¶é—´</text>
        <text class="info-value">{{dateFormatter.formatDate(taskDetail.createTime,'yyyy-MM-dd HH:mm')}}</text>
      </view>
      <view class="info-row">
        <text class="info-label">æˆªæ­¢æ—¶é—´</text>
        <text class="info-value">{{dateFormatter.formatDate(taskDetail.deadline,'yyyy-MM-dd HH:mm')}}</text>
      </view>
      <view class="info-row">
        <text class="info-label">å­¦ç”Ÿæ•°</text>
        <text class="info-value">{{scount}}</text>
      </view>
    </view>
  </view>

  <!-- æ‰“å¡è®°å½•åˆ—è¡¨ -->
  <view class="sign-list">
    <view class="list-header">
      <text class="header-title">æ‰“å¡è®°å½•</text>
      <text class="sign-count">å…± {{signList.length}} æ¡è®°å½•</text>
    </view>

    <block wx:if="{{signList.length > 0}}">
      <view class="sign-grid">
        <view class="sign-item" wx:for="{{signList}}" wx:key="id">
          <view class="user-info ">
            <text class="user-name">{{item.name}}</text>
            <text class="user-position {{item.signIn==='æœªæ‰“å¡'?'noIn':''}}">{{item.signIn}}</text>
          </view>
          <view wx-if="{{item.createTime}}" class="sign-info">
            <view class="sign-time">
              <text class="time-icon">ğŸ•’</text>
              <text>{{item.createTime}}</text>
            </view>
          </view>
        </view>
      </view>
    </block>
    <view class="empty-tip" wx:else>
      <text class="empty-icon">ğŸ“</text>
      <text>æš‚æ— æ‰“å¡è®°å½•</text>
    </view>
  </view>
</view>